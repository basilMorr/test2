<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lottie Animation</title>
    <script src="https://unpkg.com/lottie-web@latest/build/player/lottie.min.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: black;
        }
        #lottie-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }
        #lottie {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <div id="lottie-container">
        <div id="lottie"></div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log("Script loaded. Initializing Lottie animation.");

            const animation = lottie.loadAnimation({
                container: document.getElementById('lottie'),
                renderer: 'svg',
                loop: true,
                autoplay: false,
                path: 'https://test-rose-theta.vercel.app/data.json'
            });

            animation.addEventListener('DOMLoaded', () => {
                console.log("Lottie animation DOM loaded.");
                console.log("Lottie data is ready, animation frames loaded.");
                console.log("Total frames available:", animation.totalFrames);
            });

            window.addEventListener('resize', adjustLayout);
            document.addEventListener('scroll', () => {
                const maxScrollTop = document.documentElement.scrollHeight - window.innerHeight;
                const scrollFraction = window.scrollY / maxScrollTop;
                const frame = scrollFraction * animation.totalFrames;
                animation.goToAndStop(frame, true);
            });

            function adjustLayout() {
                console.log("Adjusting layout for window resize.");
                const lottieContainer = document.getElementById('lottie-container');
                const lottieDimensions = lottieContainer.getBoundingClientRect();
                console.log("Lottie Container Dimensions:", lottieDimensions);
                console.log("Window Dimensions:", window.innerWidth, window.innerHeight);
            }

            adjustLayout(); // Initial adjustment
        });
    </script>
</body>
</html>
